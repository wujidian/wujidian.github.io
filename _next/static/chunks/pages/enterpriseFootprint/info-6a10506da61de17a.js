(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[353],{86080:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/enterpriseFootprint/info",function(){return c(52705)}])},52705:function(e,b,a){"use strict";a.r(b);var f=a(47568),g=a(10797),c=a(34051),h=a.n(c),i=a(85893),j=a(82051),k=a(13819),l=a(64987),m=a(1787),n=a(76109),o=a(20482),p=a(37234),q=a(3261),r=a(78676),s=a(98542),t=a(11588),u=a(82071),v=a(32808),d=a(41664),w=a.n(d),x=a(11163),y=a(67294);b.default=function(){var R,S,T,U,V,W,c=(0,y.useContext)(n.I),X=c.state,ag=c.dispatch,b=X.enterpriseFootprintInfoId,ah=(0,x.useRouter)(),Y=s.Z.RangePicker,ai=function(a){ah.push("/enterpriseFootprint/details"),ag({type:"UPDATE_ENTERPRISE_FOOTPRINT_DETAILS_ID",payload:a})},d=(0,y.useState)({address:"\u6682\u65E0\u4FE1\u606F",create_time:"\u6682\u65E0\u4FE1\u606F",emissionLoad:"\u6682\u65E0\u4FE1\u606F",id:2,name:"\u6682\u65E0\u4FE1\u606F",reduce:"\u6682\u65E0\u4FE1\u606F",type:"\u6682\u65E0\u4FE1\u606F"}),a=d[0],aj=d[1],e=(0,y.useState)([]),z=e[0],ak=e[1],A=(0,y.useState)([]),Z=A[0],al=A[1],B=(0,y.useState)([]),$=B[0],am=B[1],C=(0,y.useState)([]),_=C[0],an=C[1],D=(0,y.useState)("1"),E=D[0],ao=D[1],F=(0,y.useState)(!0),G=F[0],ap=F[1],H=(0,y.useState)(!0),aa=H[0],aq=H[1],I=(0,y.useState)(!0),ab=I[0],ar=I[1],J=(0,y.useState)(!1),ac=J[0],as=J[1],K=(0,y.useState)(!1),L=K[0],at=K[1],M=(0,y.useState)(""),au=M[0],av=M[1],N=(0,y.useState)(""),aw=N[0],ax=N[1],O=(0,y.useState)([]),ad=O[0],ay=O[1],P=(0,y.useState)([]),ae=P[0],az=P[1],Q=(0,y.useState)({}),af=Q[0],aA=Q[1],aB=(R=(0,f.Z)(h().mark(function a(){var c;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return ap(!1),a.prev=1,a.next=4,(0,r.Nl)(b);case 4:aj((c=a.sent).data),a.next=10;break;case 8:a.prev=8,a.t0=a.catch(1);case 10:ap(!0);case 11:case"end":return a.stop()}},a,null,[[1,8]])})),function(){return R.apply(this,arguments)}),aC=(S=(0,f.Z)(h().mark(function a(){var c,d,e,f;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return aq(!1),a.prev=1,a.next=4,(0,r.Zs)(b,E);case 4:c=a.sent,d=[],e=[],f=[],c.data.forEach(function(a){d.push(a.start_time),e.push(a.carbonEquivalent),f.push(a.emissionLoad)}),al((0,g.Z)(d)),am((0,g.Z)(e)),an((0,g.Z)(f)),a.next=16;break;case 14:a.prev=14,a.t0=a.catch(1);case 16:aq(!0);case 17:case"end":return a.stop()}},a,null,[[1,14]])})),function(){return S.apply(this,arguments)}),aD=(T=(0,f.Z)(h().mark(function a(){var c,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return ar(!1),a.prev=1,a.next=4,(0,r.xC)(b);case 4:d=(c=a.sent).data.map(function(a){return{id:a.id,title:a.name,emissions:a.emissionLoad,time:a.startTime,iconImg:"/images/Group.png"}}),ak((0,g.Z)(d)),a.next=11;break;case 9:a.prev=9,a.t0=a.catch(1);case 11:ar(!0);case 12:case"end":return a.stop()}},a,null,[[1,9]])})),function(){return T.apply(this,arguments)}),aE=(U=(0,f.Z)(h().mark(function a(b){var c;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,r.wg)(b);case 3:aA((c=a.sent).data),at(!0),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),t.ZP.error("\u67E5\u770B\u8BB0\u5F55\u5931\u8D25,\u8BF7\u7A0D\u540E\u91CD\u8BD5");case 11:case"end":return a.stop()}},a,null,[[0,8]])})),function(a){return U.apply(this,arguments)}),aF=(V=(0,f.Z)(h().mark(function a(){var c;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(0!==ae.length){a.next=3;break}return t.ZP.error("\u8BF7\u9009\u62E9\u62A5\u8868\u7C7B\u578B"),a.abrupt("return");case 3:if(!(!au||!aw)){a.next=6;break}return t.ZP.error("\u8BF7\u9009\u62E9\u65E5\u671F"),a.abrupt("return");case 6:return as(!1),a.next=9,(0,r.ij)(b,{startTime:au,endTime:aw,activityId:ae.join(",")});case 9:aA((c=a.sent).data),at(!0);case 12:case"end":return a.stop()}},a)})),function(){return V.apply(this,arguments)}),aG=(W=(0,f.Z)(h().mark(function a(b){var c,d;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,r.g_)(b);case 3:d=(c=a.sent).data.reverse(),ay((0,g.Z)(d)),a.next=10;break;case 8:a.prev=8,a.t0=a.catch(0);case 10:case"end":return a.stop()}},a,null,[[0,8]])})),function(a){return W.apply(this,arguments)});return(0,y.useEffect)(function(){aB(),aD()},[b]),(0,y.useEffect)(function(){aC()},[b,E]),(0,y.useEffect)(function(){aG(b)},[b,L]),(0,i.jsxs)("div",{className:"parkFootprint",children:[(0,i.jsx)("div",{className:"m24",children:(0,i.jsx)("div",{className:"blueTip",children:(0,i.jsx)(w(),{href:"/enterpriseFootprint",children:" \u8FD4\u56DE \u4F01\u4E1A\u78B3\u8DB3\u8FF9"})})}),(0,i.jsxs)("div",{className:"topCardBox",children:[(0,i.jsx)("div",{className:"parkcard-box",children:G?(0,i.jsx)(p.Z,{parkName:a.name,parkLoc:a.address,parktype:a.type,create_time:a.create_time}):(0,i.jsx)(o.Z,{})}),(0,i.jsx)("div",{className:"TotalCount-box",children:G?(0,i.jsx)(q.Z,{title:"\u4F01\u4E1A\u672C\u5E74\u5EA6\u78B3\u6392\u653E\u603B\u91CF",total:a.emissionLoad,addOrsub:!1,deviation:a.reduce}):(0,i.jsx)(o.Z,{})})]}),(0,i.jsx)("div",{className:"lineChartBox",children:aa?(0,i.jsx)(l.Z,{park_name:"\u4F01\u4E1A\u78B3\u8DB3\u8FF9",toDay_data:0,park_xAxisData:Z,park_carbonEquivalent:$,park_emissionLoad:_,setTimeType:function(a){return ao(a)},timeType:E}):(0,i.jsx)(o.Z,{rows:8})}),(0,i.jsx)("div",{children:ab?z.map(function(a,b){return(0,i.jsx)(m.Z,{linkFun:function(){return ai(a.id)},time:a.time,title:a.title,iconImg:a.iconImg,emissions:a.emissions,id:a.id},b.toString())}):(0,i.jsx)(o.Z,{})}),(0,i.jsxs)("div",{className:"m24 flex jcsbcentennt",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"pageTitle",children:"\u4F01\u4E1A\u78B3\u6838\u7B97\u62A5\u544A "}),(0,i.jsx)("span",{className:"mr5",children:" \u751F\u6210\u4F9D\u636E "}),(0,i.jsx)("span",{className:"blueTip",children:"ISO-14064\u78B3\u6838\u7B97\u6807\u51C6"})]}),(0,i.jsx)("button",{className:"viewRecords",onClick:function(){as(!0)},children:"\u751F\u6210\u62A5\u544A"})]}),(0,i.jsx)("div",{children:ad.map(function(a,b){return(0,i.jsx)(m.Z,{id:a.id,time:a.create_time,title:a.name,iconImg:"/images/Group.png",type:a.activity_name,appendButto:(0,i.jsx)(j.Z,{btnText:"\u67E5\u770B\u62A5\u544A",btnClickFun:function(){aE(a.id)}})},b.toString())})}),(0,i.jsxs)(u.Z,{title:"\u9009\u62E9\u62A5\u544A",visible:ac,onOk:function(){aF()},onCancel:function(){return as(!1)},cancelText:"\u53D6\u6D88",okText:"\u786E\u5B9A",children:[(0,i.jsx)("div",{style:{margin:"0 0 40px 0"},children:(0,i.jsx)(v.Z.Group,{options:z.map(function(a,b){return{label:a.title,value:a.id}}),defaultValue:ae,onChange:function(a){az(a)}})}),(0,i.jsx)(Y,{format:"YYYY/MM/DD",onChange:function(a){a?(av(a[0].format("YYYY-MM-DD")),ax(a[1].format("YYYY-MM-DD"))):(av(""),ax(""))}})]}),(0,i.jsx)(k.Z,{pdfShow:L,onCancel:function(){return at(!1)},pdfParkInfo:af})]})}}},function(a){a.O(0,[443,847,885,421,220,711,551,774,888,179],function(){var b;return a(a.s=86080)}),_N_E=a.O()}])