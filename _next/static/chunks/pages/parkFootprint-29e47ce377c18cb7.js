(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{53370:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/parkFootprint",function(){return c(45685)}])},64987:function(d,b,a){"use strict";var e=a(85893),f=a(80421),g=a(67294),c=a(46505),h=a.n(c),i=[{label:"\u672C\u5468",id:"0"},{label:"\u6708\u5EA6",id:"1"},{label:"\u5E74\u5EA6",id:"2"},];b.Z=function(a){var l=function(){var a=f.JE(k.current);(r=a||f.S1(k.current)).setOption(s)},m=function(){return r.resize()},n=function(a,b){var c=null;return function(){null!==c&&clearTimeout(c),c=setTimeout(a,b)}},o=function(){window.addEventListener("resize",n(m,500))},b=a.park_name,j=(a.toDay_data,a.park_xAxisData),c=a.park_carbonEquivalent,d=a.park_emissionLoad,p=a.setTimeType,q=a.timeType,k=(0,g.useRef)(null),r=null,s={title:{text:b,subtext:"(kgCO2e)"},grid:{left:"5%",right:"5%",bottom:"8%"},xAxis:{type:"category",boundaryGap:!1,data:j},yAxis:{type:"value"},legend:{data:["\u78B3\u6392\u653E\u91CF","\u57FA\u51C6\u6392\u653E\u91CF"]},series:[{name:"\u78B3\u6392\u653E\u91CF",data:c,type:"line",smooth:!0,areaStyle:{}},{name:"\u57FA\u51C6\u6392\u653E\u91CF",data:d,type:"line",smooth:!0,areaStyle:{}},]};return(0,g.useEffect)(function(){return l(),o(),function(){r&&r.dispose()}},[c,d,b]),(0,e.jsxs)("div",{className:h().LineChart,style:{textAlign:"center"},children:[(0,e.jsx)("div",{ref:k,style:{height:"370px",width:"100%"}}),(0,e.jsx)("div",{className:h().timeType,children:i.map(function(a,b){return(0,e.jsx)("span",{className:a.id==q?h().active:"",onClick:function(){p(a.id)},children:a.label},b)})})]})}},1787:function(d,b,a){"use strict";var e=a(85893),c=a(41853),f=a.n(c);b.Z=function(a){var b=a.title,c=a.iconImg,d=a.time,g=a.emissions,h=a.appendButto,i=a.linkFun;return(0,e.jsxs)("div",{className:f().miniCardBox,onClick:i,children:[(0,e.jsxs)("div",{className:f().miniCardIconBox,children:[(0,e.jsx)("img",{src:c,alt:""}),(0,e.jsx)("span",{children:b})]}),(0,e.jsxs)("div",{className:f().miniCardTimeBox,children:[(0,e.jsx)("span",{className:f().tipsTitle,children:"\u65E5\u671F"}),(0,e.jsxs)("span",{className:f().miniCardIconBox,children:[(0,e.jsx)("img",{src:"/images/icon-time.png",alt:""}),(0,e.jsx)("span",{className:f().time,children:d})]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:f().tipsTitle,children:"\u78B3\u6392\u653E\u91CF"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:f().emissions,children:g}),(0,e.jsx)("span",{className:"goldenlabel",children:"kgCO2e"})]})]}),h]})}},20482:function(c,b,a){"use strict";var d=a(85893),e=a(26303);b.Z=function(a){var b=a.rows,c=a.bc;return(0,d.jsx)("div",{style:{background:void 0===c?"#fff":c,padding:"20px 40px 10px",borderRadius:"20px",margin:"20px 0"},children:(0,d.jsx)(e.Z,{active:!0,paragraph:{rows:void 0===b?3:b}})})}},37234:function(d,b,a){"use strict";var e=a(85893),c=a(91276),f=a.n(c);b.Z=function(a){var g=a.parkName,h=a.parkLoc,i=a.parktype,b=a.parknum,c=a.area,d=a.create_time;return(0,e.jsxs)("div",{className:f().ParkCard,children:[(0,e.jsx)("img",{className:f().industry,src:"/images/industry.png",alt:""}),(0,e.jsxs)("div",{className:f().parkInfoBox,children:[(0,e.jsx)("span",{className:f().parkName,children:g}),(0,e.jsx)("span",{className:f().parkLoc,children:h}),(0,e.jsxs)("div",{className:f().parkInfoItem,children:[(0,e.jsxs)("div",{className:f().phoneRow,children:[(0,e.jsx)("span",{className:f().parkInfoTitle,children:"\u7C7B\u578B"}),(0,e.jsx)("span",{className:f().parkInfoCentent,children:i})]}),b&&(0,e.jsxs)("div",{className:f().phoneRow,children:[(0,e.jsx)("span",{className:f().parkInfoTitle,children:"\u4F01\u4E1A\u6570"}),(0,e.jsx)("span",{className:f().parkInfoCentent,children:b})]}),c&&(0,e.jsxs)("div",{className:f().phoneRow,children:[(0,e.jsx)("span",{className:f().parkInfoTitle,children:"\u9762\u79EF"}),(0,e.jsx)("span",{className:f().parkInfoCentent,children:c}),(0,e.jsx)("div",{className:"goldenlabel",children:"\u5E73\u65B9\u516C\u91CC"})]}),d&&(0,e.jsxs)("div",{className:f().phoneRow,children:[(0,e.jsx)("span",{className:f().parkInfoTitle,children:"\u5165\u9A7B\u65F6\u95F4"}),(0,e.jsx)("span",{className:f().parkInfoCentent,children:d})]})]})]})]})}},3261:function(d,b,a){"use strict";var e=a(85893),c=a(62623),f=a.n(c);b.Z=function(a){var b=a.total,c=a.addOrsub,d=a.deviation;return(0,e.jsxs)("div",{className:f().TotalCountBox,children:[(0,e.jsx)("span",{className:"TotalCountTitle",children:"\u56ED\u533A\u672C\u5E74\u5EA6\u78B3\u6392\u653E\u603B\u91CF"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("span",{className:"TotalCountNum",children:b}),(0,e.jsx)("span",{className:"goldenlabel",children:"kgCO2e"})]}),(0,e.jsx)("div",{className:f().line}),(0,e.jsxs)("div",{children:[(0,e.jsxs)("span",{className:f().addOrsub,children:["\u6BD4\u53BB\u5E74",c?"\u589E\u52A0":"\u51CF\u5C11"]}),(0,e.jsx)("span",{className:f().deviation,children:d})]})]})}},45685:function(f,b,a){"use strict";a.r(b),a.d(b,{default:function(){return F}});var g=a(47568),h=a(10797),c=a(34051),i=a.n(c),j=a(85893),k=a(64987),l=a(1787),m=a(37234),n=a(3261),o=a(67294),p=function(a){var d=a.longitude,e=a.latitude,b=a.title,f=function(){var a=new TMap.LatLng(e,d),c=new TMap.Map(document.getElementById("mapRef"),{disableDefaultUI:!0,center:a,zoom:17,baseMap:{type:"satellite",features:["base","building2d"]}});new TMap.MultiMarker({map:c,enableDefaultStyle:!1,styles:{myStyle:new TMap.MarkerStyle({width:20,height:30,anchor:{x:10,y:30},src:"/images/mark.png",size:16,color:"#333",strokeWidth:2,strokeColor:"#fff",direction:"bottom"})},geometries:[{position:a,id:"1",styleId:"myStyle",content:b},]})},c=(0,o.useRef)(null);return(0,o.useEffect)(function(){f()},[b]),(0,j.jsx)("div",{id:"mapRef",className:"Mymap",ref:c})},q=a(20482),d=a(61120),r=a.n(d),s=a(91819),t=function(l,g){var a=document.getElementById(g),h=a.offsetWidth,i=a.offsetHeight,j=a.offsetTop,k=a.offsetLeft,b=document.createElement("canvas"),c=0,d=document.body.clientWidth,e=window.innerWidth;e>d&&(c=(e-d)/2),b.width=2*h,b.height=2*i;var f=b.getContext("2d");f.scale(2,2),f.translate(-k-c,-j),r()(a,{allowTaint:!0,scale:2}).then(function(b){var e=b.width,f=b.height,g=e/592.28*841.89,c=f,d=0,h=592.28/e*f,i=b.toDataURL("image/jpeg",1),a=new s.ZP({unit:"pt",format:"a4"});if(c<g)a.addImage(i,"JPEG",0,d,595.28,h);else for(;c>0;)a.addImage(i,"JPEG",0,d,595.28,h),d-=841.89,(c-=g)>0&&a.addPage();a.save("\u4F60\u7684\u540D\u5B57.pdf")})},u=a(98542),v=a(82071),w=a(32808),x=a(2885),e=a(33540),y=a.n(e),z={id:0,name:"\u6210\u90FD\u56ED\u533A",area:"58000",num:0,address:"\u6210\u90FD\u5E02\u9AD8\u65B0\u533A",emissionLoad:"",region:"",type:"\u5DE5\u4E1A\u56ED\u533A",reduce:""},A=[{id:0,name:"\u5DE5\u4E1A\u7528\u7535",emissionLoad:"1548.154",carbonEquivalent:"2266",startTime:"2022/7/11"},{id:1,name:"\u4EA4\u901A\u7528\u7535",emissionLoad:"1548.154",carbonEquivalent:"2266",startTime:"2022/7/11"},],B=function(a){var d=a.typeOptions,e=a.title,f=a.generationBasis,g=u.Z.RangePicker,b=(0,o.useState)(!1),h=b[0],k=b[1],c=(0,o.useState)(!1),i=c[0],l=c[1],m=function(){t("","pdfDOM")},n=function(){k(!0)};return(0,j.jsxs)("div",{children:[(0,j.jsxs)("div",{className:"m24 flex jcsbcentennt",children:[(0,j.jsxs)("div",{children:[(0,j.jsxs)("span",{className:"pageTitle",children:[e," "]}),(0,j.jsx)("span",{className:"mr5",children:" \u751F\u6210\u4F9D\u636E "}),(0,j.jsx)("span",{className:"blueTip",children:f})]}),(0,j.jsx)("button",{onClick:function(){return n()},children:"\u67E5\u770B\u62A5\u544A"})]}),(0,j.jsxs)(v.Z,{title:"\u9009\u62E9\u62A5\u544A",visible:h,onOk:function(){k(!1),l(!0)},onCancel:function(){return k(!1)},cancelText:"\u53D6\u6D88",okText:"\u786E\u5B9A",children:[(0,j.jsx)("div",{style:{margin:"0 0 40px 0"},children:(0,j.jsx)(w.Z.Group,{options:d,defaultValue:[]})}),(0,j.jsx)(x.Z,{direction:"vertical",size:12,children:(0,j.jsx)(g,{})})]}),(0,j.jsx)(v.Z,{title:"\u9884\u89C8",centered:!0,visible:i,width:1e3,bodyStyle:{height:"50vh",overflowY:"scroll"},onOk:function(){return m()},onCancel:function(){return l(!1)},okText:"\u5BFC\u51FA",cancelText:"\u53D6\u6D88",children:(0,j.jsx)("div",{id:"pdfDOM",children:(0,j.jsxs)("div",{className:y().pdfBox,children:[(0,j.jsx)("div",{className:y().title,children:"\u57FA\u672C\u4FE1\u606F"}),(0,j.jsxs)("div",{className:y().infoBox,children:[(0,j.jsx)("span",{children:"\u56ED\u533A/\u4F01\u4E1A\u540D\u79F0 "}),(0,j.jsx)("span",{children:z.name})]}),(0,j.jsxs)("div",{className:y().infoBox,children:[(0,j.jsx)("span",{children:"\u7C7B\u578B"}),(0,j.jsx)("span",{children:z.type})]}),(0,j.jsxs)("div",{className:y().infoBox,children:[(0,j.jsx)("span",{children:"\u5E74\u4EFD"}),(0,j.jsx)("span",{children:z.emissionLoad})]}),(0,j.jsxs)("div",{className:y().infoBox,children:[(0,j.jsx)("span",{children:"\u5730\u5740"}),(0,j.jsx)("span",{children:z.address})]}),(0,j.jsx)("div",{className:y().title,children:"\u6392\u653E\u4FE1\u606F"}),A.map(function(a,b){return(0,j.jsxs)("div",{className:y().infoBox,children:[(0,j.jsx)("span",{children:a.name}),(0,j.jsx)("span",{children:a.emissionLoad})]},b)}),(0,j.jsx)("div",{className:y().title,children:"\u660E\u7EC6"}),(0,j.jsxs)("div",{className:y().details,children:[(0,j.jsx)("span",{}),(0,j.jsx)("span",{className:y().name,children:"\u80FD\u6E90\u540D\u79F0"}),(0,j.jsx)("span",{children:"\u6D88\u8D39\u91CF\uFF08KWH\uFF09"}),(0,j.jsx)("span",{children:"CO2\u6392\u653E\u56E0\u5B50 \uFF08kgCO2/KWH\uFF09"}),(0,j.jsx)("span",{children:"CO2\u6392\u653E\u91CF\uFF08kg\uFF09"})]})]})})})]})},C=a(11163),D=a(78676),E=a(76109),F=function(){var G,H,I,P=(0,C.useRouter)(),b=(0,o.useContext)(E.I),J=b.state,Q=b.dispatch,c=J.parkId,d=(0,o.useState)(!0),e=d[0],R=d[1],f=(0,o.useState)(!0),K=f[0],S=f[1],r=(0,o.useState)(!0),L=r[0],T=r[1],s=(0,o.useState)("1"),t=s[0],U=s[1],u=(0,o.useState)({id:0,name:"\u6682\u65E0\u4FE1\u606F",area:"",num:0,address:"\u6682\u65E0\u4FE1\u606F",emissionLoad:"0",region:"\u6682\u65E0\u4FE1\u606F",type:"\u6682\u65E0\u4FE1\u606F",reduce:"0.00",location:{coordinates:[0,0],type:"Point"}}),a=u[0],V=u[1],v=(0,o.useState)([{id:0,title:"\u6682\u65E0\u6D88\u606F",iconImg:"/images/Group.png",time:"\u6682\u65E0\u4FE1\u606F",emissions:"0.00"},]),w=v[0],W=v[1],x=(0,o.useState)([]),M=x[0],X=x[1],y=(0,o.useState)([]),N=y[0],Y=y[1],z=(0,o.useState)([]),O=z[0],Z=z[1],A=(0,o.useState)({latitude:30.572961,longitude:104.066301}),F=A[0],$=A[1],_=function(a){Q({type:"UPDATE_PARK_FOOTPRINT_INFO_ID",payload:a}),P.push("/parkFootprint/info")},aa=(G=(0,g.Z)(i().mark(function a(b){var c;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return R(!1),a.prev=1,a.next=4,(0,D.dC)(b);case 4:V((c=a.sent).data),$({latitude:c.data.location.coordinates[1],longitude:c.data.location.coordinates[0]}),a.next=11;break;case 9:a.prev=9,a.t0=a.catch(1);case 11:R(!0);case 12:case"end":return a.stop()}},a,null,[[1,9]])})),function(a){return G.apply(this,arguments)}),ab=(H=(0,g.Z)(i().mark(function a(b,c){var d,e,f,g;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return S(!1),a.prev=1,a.next=4,(0,D.rX)(b,c);case 4:d=a.sent,e=[],f=[],g=[],d.data.forEach(function(a){e.push(a.startTime),f.push(a.carbonEquivalent),g.push(a.emissionLoad)}),X((0,h.Z)(e)),Y((0,h.Z)(f)),Z((0,h.Z)(g)),a.next=16;break;case 14:a.prev=14,a.t0=a.catch(1);case 16:S(!0);case 17:case"end":return a.stop()}},a,null,[[1,14]])})),function(a,b){return H.apply(this,arguments)}),ac=(I=(0,g.Z)(i().mark(function a(b){var c,d;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return T(!1),a.prev=1,a.next=4,(0,D.Fe)(b);case 4:d=(c=a.sent).data.map(function(a){return{id:a.id,title:a.name,emissions:a.emissionLoad,time:a.startTime,iconImg:"/images/Group.png"}}),W((0,h.Z)(d)),a.next=11;break;case 9:a.prev=9,a.t0=a.catch(1);case 11:T(!0);case 12:case"end":return a.stop()}},a,null,[[1,9]])})),function(a){return I.apply(this,arguments)});return(0,o.useEffect)(function(){c&&(aa(c),ac(c))},[c]),(0,o.useEffect)(function(){ab(c,t)},[c,t]),(0,j.jsxs)("div",{className:"parkFootprint",children:[(0,j.jsxs)("div",{className:"topCardBox",children:[(0,j.jsx)("div",{className:"parkcard-box",children:e?(0,j.jsx)(m.Z,{parkName:a.name,parkLoc:a.address,parktype:a.type,parknum:a.num,area:a.area}):(0,j.jsx)(q.Z,{})}),(0,j.jsx)("div",{className:"TotalCount-box",children:e?(0,j.jsx)(n.Z,{total:a.emissionLoad,addOrsub:!1,deviation:a.reduce}):(0,j.jsx)(q.Z,{})})]}),(0,j.jsx)("div",{className:"lineChartBox",children:K?(0,j.jsx)(k.Z,{park_name:a.name,toDay_data:0,park_xAxisData:M,park_carbonEquivalent:N,park_emissionLoad:O,setTimeType:function(a){return U(a)},timeType:t}):(0,j.jsx)(q.Z,{rows:8})}),"\u6682\u65E0\u4FE1\u606F"!==a.name?(0,j.jsx)(p,{longitude:F.longitude,latitude:F.latitude,title:a.name}):(0,j.jsx)(p,{longitude:"104.066301",latitude:"30.572961",title:"\u6682\u65E0\u4FE1\u606F"}),(0,j.jsx)("div",{children:L?(0,j.jsx)("div",{children:w.map(function(a,b){return(0,j.jsx)(l.Z,{id:a.id,linkFun:function(){return _(a.id)},time:a.time,title:a.title,iconImg:a.iconImg,emissions:a.emissions},b.toString())})}):(0,j.jsx)(q.Z,{rows:8})}),(0,j.jsx)(B,{typeOptions:w.map(function(a,b){return{label:a.title,value:a.id}}),title:"\u56ED\u533A\u78B3\u6838\u7B97\u62A5\u544A",generationBasis:"ISO-14064\u78B3\u6838\u7B97\u6807\u51C6"})]})}},46505:function(a){a.exports={LineChart:"LineChart_LineChart__Aob38",timeType:"LineChart_timeType__FZF3K",active:"LineChart_active__uFqeL"}},41853:function(a){a.exports={miniCardBox:"MiniCard_miniCardBox__xp_Fm",miniCardIconBox:"MiniCard_miniCardIconBox__3nV6z",miniCardTimeBox:"MiniCard_miniCardTimeBox__VKPKA",time:"MiniCard_time__rdUA_",tipsTitle:"MiniCard_tipsTitle__cvHtI",emissions:"MiniCard_emissions__svKgw"}},91276:function(a){a.exports={ParkCard:"ParkCard_ParkCard__rbIlc",industry:"ParkCard_industry___Y4lP",parkInfoBox:"ParkCard_parkInfoBox__7THyj",parkName:"ParkCard_parkName__lMNh3",parkLoc:"ParkCard_parkLoc__ymXFg",parkInfoItem:"ParkCard_parkInfoItem__at1Dn",parkInfoTitle:"ParkCard_parkInfoTitle__bM2VG",parkInfoCentent:"ParkCard_parkInfoCentent__6rCmn",box:"ParkCard_box__qGLJc",phoneRow:"ParkCard_phoneRow__xCYZB"}},62623:function(a){a.exports={TotalCountBox:"TotalCount_TotalCountBox__jGImy",line:"TotalCount_line__cQk1g",addOrsub:"TotalCount_addOrsub__zxQ_c",deviation:"TotalCount_deviation__WCt66"}},33540:function(a){a.exports={pdfBox:"exportPdf_pdfBox__k2MHY",title:"exportPdf_title___DBbW",infoBox:"exportPdf_infoBox__AUq39",details:"exportPdf_details__eCTS1",name:"exportPdf_name__GI03D"}}},function(a){a.O(0,[885,847,443,421,220,711,774,888,179],function(){var b;return a(a.s=53370)}),_N_E=a.O()}])